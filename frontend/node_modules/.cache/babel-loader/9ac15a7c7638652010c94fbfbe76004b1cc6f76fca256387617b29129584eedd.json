{"ast":null,"code":"import { createAsyncThunk } from '@reduxjs/toolkit';\nimport productApi from '../../utils/api/productApi';\nimport sizeApi from '../../utils/api/sizeApi';\nexport const fetchProducts = createAsyncThunk('products/fetchProducts', async () => {\n  const products = await productApi.getProducts();\n  console.log(products);\n  const productSizes = await sizeApi.getProductSizes();\n  const productSizesMap = productSizes.reduce((map, size) => {\n    if (!map[size.productID]) {\n      map[size.productID] = [];\n    }\n    map[size.productID].push(size);\n    return map;\n  }, {});\n  const productsWithSizes = products.map(product => {\n    const {\n      productID\n    } = product;\n    const sizes = productSizesMap[productID] || [];\n    const minPrice = Math.min(...sizes.map(_ref => {\n      let {\n        price\n      } = _ref;\n      return price;\n    }));\n    const inStock = sizes.length > 0;\n    return {\n      ...product,\n      sizes,\n      defaultPrice: minPrice,\n      inStock\n    };\n  });\n  console.log(productsWithSizes);\n  return productsWithSizes;\n});\nexport const fetchProductById = createAsyncThunk('products/fetchProductById', async productId => {\n  const product = await productApi.getProduct(productId);\n  return product;\n});\nexport const createProduct = createAsyncThunk('products/createProduct', async product => {\n  const createdProduct = await productApi.addProduct(product);\n  return createdProduct;\n});\nexport const updateExistingProduct = createAsyncThunk('products/updateExistingProduct', async _ref2 => {\n  let {\n    productId,\n    product\n  } = _ref2;\n  const updatedProduct = await productApi.updateProduct(productId, product);\n  return updatedProduct;\n});\nexport const removeProduct = createAsyncThunk('products/removeProduct', async productId => {\n  const deletedProduct = await productApi.deleteProduct(productId);\n  return deletedProduct;\n});","map":{"version":3,"names":["createAsyncThunk","productApi","sizeApi","fetchProducts","products","getProducts","console","log","productSizes","getProductSizes","productSizesMap","reduce","map","size","productID","push","productsWithSizes","product","sizes","minPrice","Math","min","_ref","price","inStock","length","defaultPrice","fetchProductById","productId","getProduct","createProduct","createdProduct","addProduct","updateExistingProduct","_ref2","updatedProduct","updateProduct","removeProduct","deletedProduct","deleteProduct"],"sources":["C:/Users/Surface/Documents/Pal/myproject/ecommerce-app-ms-sql-net-react-main/frontend/src/store/actions/productActions.js"],"sourcesContent":["\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport productApi from '../../utils/api/productApi';\nimport sizeApi from '../../utils/api/sizeApi';\n\nexport const fetchProducts = createAsyncThunk(\n  'products/fetchProducts',\n  async () => {\n    const products = await productApi.getProducts();\n    console.log(products);\n    const productSizes = await sizeApi.getProductSizes();\n    const productSizesMap = productSizes.reduce((map, size) => {\n      if (!map[size.productID]) {\n        map[size.productID] = [];\n      }\n      map[size.productID].push(size);\n      return map;\n    }, {});\n    const productsWithSizes = products.map(product => {\n      const { productID } = product;\n      const sizes = productSizesMap[productID] || [];\n      const minPrice = Math.min(...sizes.map(({ price }) => price));\n      const inStock = sizes.length > 0;\n      return { ...product, sizes, defaultPrice: minPrice, inStock };\n    });\n    console.log(productsWithSizes);\n    return productsWithSizes;\n  }\n);\n\n\n  export const fetchProductById = createAsyncThunk('products/fetchProductById', async (productId) => {\n    const product = await productApi.getProduct(productId);\n    return product;\n  });\n  \n  export const createProduct = createAsyncThunk('products/createProduct', async (product) => {\n    const createdProduct = await productApi.addProduct(product);\n    return createdProduct;\n  });\n  \n  export const updateExistingProduct = createAsyncThunk(\n    'products/updateExistingProduct',\n    async ({ productId, product }) => {\n      const updatedProduct = await productApi.updateProduct(productId, product);\n      return updatedProduct;\n    }\n  );\n  \n  export const removeProduct = createAsyncThunk('products/removeProduct', async (productId) => {\n    const deletedProduct = await productApi.deleteProduct(productId);\n    return deletedProduct;\n  });"],"mappings":"AACA,SAASA,gBAAgB,QAAQ,kBAAkB;AACnD,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,OAAO,MAAM,yBAAyB;AAE7C,OAAO,MAAMC,aAAa,GAAGH,gBAAgB,CAC3C,wBAAwB,EACxB,YAAY;EACV,MAAMI,QAAQ,GAAG,MAAMH,UAAU,CAACI,WAAW,EAAE;EAC/CC,OAAO,CAACC,GAAG,CAACH,QAAQ,CAAC;EACrB,MAAMI,YAAY,GAAG,MAAMN,OAAO,CAACO,eAAe,EAAE;EACpD,MAAMC,eAAe,GAAGF,YAAY,CAACG,MAAM,CAAC,CAACC,GAAG,EAAEC,IAAI,KAAK;IACzD,IAAI,CAACD,GAAG,CAACC,IAAI,CAACC,SAAS,CAAC,EAAE;MACxBF,GAAG,CAACC,IAAI,CAACC,SAAS,CAAC,GAAG,EAAE;IAC1B;IACAF,GAAG,CAACC,IAAI,CAACC,SAAS,CAAC,CAACC,IAAI,CAACF,IAAI,CAAC;IAC9B,OAAOD,GAAG;EACZ,CAAC,EAAE,CAAC,CAAC,CAAC;EACN,MAAMI,iBAAiB,GAAGZ,QAAQ,CAACQ,GAAG,CAACK,OAAO,IAAI;IAChD,MAAM;MAAEH;IAAU,CAAC,GAAGG,OAAO;IAC7B,MAAMC,KAAK,GAAGR,eAAe,CAACI,SAAS,CAAC,IAAI,EAAE;IAC9C,MAAMK,QAAQ,GAAGC,IAAI,CAACC,GAAG,CAAC,GAAGH,KAAK,CAACN,GAAG,CAACU,IAAA;MAAA,IAAC;QAAEC;MAAM,CAAC,GAAAD,IAAA;MAAA,OAAKC,KAAK;IAAA,EAAC,CAAC;IAC7D,MAAMC,OAAO,GAAGN,KAAK,CAACO,MAAM,GAAG,CAAC;IAChC,OAAO;MAAE,GAAGR,OAAO;MAAEC,KAAK;MAAEQ,YAAY,EAAEP,QAAQ;MAAEK;IAAQ,CAAC;EAC/D,CAAC,CAAC;EACFlB,OAAO,CAACC,GAAG,CAACS,iBAAiB,CAAC;EAC9B,OAAOA,iBAAiB;AAC1B,CAAC,CACF;AAGC,OAAO,MAAMW,gBAAgB,GAAG3B,gBAAgB,CAAC,2BAA2B,EAAE,MAAO4B,SAAS,IAAK;EACjG,MAAMX,OAAO,GAAG,MAAMhB,UAAU,CAAC4B,UAAU,CAACD,SAAS,CAAC;EACtD,OAAOX,OAAO;AAChB,CAAC,CAAC;AAEF,OAAO,MAAMa,aAAa,GAAG9B,gBAAgB,CAAC,wBAAwB,EAAE,MAAOiB,OAAO,IAAK;EACzF,MAAMc,cAAc,GAAG,MAAM9B,UAAU,CAAC+B,UAAU,CAACf,OAAO,CAAC;EAC3D,OAAOc,cAAc;AACvB,CAAC,CAAC;AAEF,OAAO,MAAME,qBAAqB,GAAGjC,gBAAgB,CACnD,gCAAgC,EAChC,MAAAkC,KAAA,IAAkC;EAAA,IAA3B;IAAEN,SAAS;IAAEX;EAAQ,CAAC,GAAAiB,KAAA;EAC3B,MAAMC,cAAc,GAAG,MAAMlC,UAAU,CAACmC,aAAa,CAACR,SAAS,EAAEX,OAAO,CAAC;EACzE,OAAOkB,cAAc;AACvB,CAAC,CACF;AAED,OAAO,MAAME,aAAa,GAAGrC,gBAAgB,CAAC,wBAAwB,EAAE,MAAO4B,SAAS,IAAK;EAC3F,MAAMU,cAAc,GAAG,MAAMrC,UAAU,CAACsC,aAAa,CAACX,SAAS,CAAC;EAChE,OAAOU,cAAc;AACvB,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}