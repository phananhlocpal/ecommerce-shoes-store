{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nexport const DELIVERY_THRESHOLD = 1200;\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: localStorage.getItem('cartItems') ? JSON.parse(localStorage.getItem('cartItems')) : [],\n    subtotal: 0,\n    delivery: 0,\n    discount: 0,\n    total: 0\n  },\n  reducers: {\n    addToCart: (state, action) => {\n      const {\n        product,\n        size,\n        quantity = 1,\n        price\n      } = action.payload;\n      const existingItem = state.items.find(item => item.product.id === product.id && item.size === size);\n      if (existingItem) {\n        existingItem.quantity += quantity;\n      } else {\n        state.items.push({\n          product,\n          size,\n          quantity,\n          price\n        });\n      }\n      localStorage.setItem('cartItems', JSON.stringify(state.items));\n    },\n    removeFromCart: (state, action) => {\n      const {\n        product,\n        size\n      } = action.payload;\n      state.items = state.items.filter(item => item.product.id !== product.id || item.size !== size);\n      localStorage.setItem('cartItems', JSON.stringify(state.items));\n    },\n    updateQuantity: (state, action) => {\n      const {\n        productId,\n        size,\n        quantity\n      } = action.payload;\n      const cartItemIndex = state.items.findIndex(item => item.product.id === productId && item.size === size);\n      if (cartItemIndex !== -1) {\n        state.items[cartItemIndex].quantity = quantity;\n        localStorage.setItem('cartItems', JSON.stringify(state.items));\n      }\n    },\n    clearCart: (state, action) => {\n      state.items = [];\n      localStorage.removeItem('cartItems');\n    },\n    calculateSubtotal: (state, action) => {\n      const subtotal = state.items.reduce((acc, item) => acc + item.price * item.quantity, 0);\n      if (subtotal >= DELIVERY_THRESHOLD) {\n        state.delivery = 0;\n        state.subtotal = subtotal;\n      } else {\n        state.delivery = 60;\n        state.subtotal = subtotal;\n      }\n    },\n    updateDelivery: (state, action) => {\n      state.delivery = action.payload.deliveryCost;\n    },\n    applyDiscount: (state, action) => {\n      state.discount = action.payload.discount;\n      console.log(\"discount sat:\", state.discount);\n    },\n    getTotal: state => {\n      state.total = state.subtotal - state.subtotal * state.discount + state.delivery;\n    }\n  }\n});\nexport const {\n  addToCart,\n  removeFromCart,\n  updateQuantity,\n  clearCart,\n  calculateSubtotal,\n  updateDelivery,\n  applyDiscount,\n  getTotal\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","DELIVERY_THRESHOLD","cartSlice","name","initialState","items","localStorage","getItem","JSON","parse","subtotal","delivery","discount","total","reducers","addToCart","state","action","product","size","quantity","price","payload","existingItem","find","item","id","push","setItem","stringify","removeFromCart","filter","updateQuantity","productId","cartItemIndex","findIndex","clearCart","removeItem","calculateSubtotal","reduce","acc","updateDelivery","deliveryCost","applyDiscount","console","log","getTotal","actions","reducer"],"sources":["C:/Users/Surface/Documents/Pal/myproject/ecommerce-app-ms-sql-net-react-main/frontend/src/store/reducers/cartSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nexport const DELIVERY_THRESHOLD = 1200;\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: localStorage.getItem('cartItems')\n      ? JSON.parse(localStorage.getItem('cartItems'))\n      : [],    \n      subtotal: 0,\n      delivery: 0,\n      discount: 0,\n      total: 0,\n  },\n  reducers: {\n    addToCart: (state, action) => {\n      const { product, size, quantity = 1, price } = action.payload;\n      const existingItem = state.items.find(item => item.product.id === product.id && item.size === size);\n      if (existingItem) {\n        existingItem.quantity += quantity;\n      } else {\n        state.items.push({ product, size, quantity, price });\n      }\n      localStorage.setItem('cartItems', JSON.stringify(state.items));\n    },\n    \n    removeFromCart: (state, action) => {\n      const { product, size } = action.payload; \n      state.items = state.items.filter(item => item.product.id !== product.id || item.size !== size); \n      localStorage.setItem('cartItems', JSON.stringify(state.items));\n    },\n    updateQuantity: (state, action) => {\n      const { productId, size, quantity } = action.payload;\n      const cartItemIndex = state.items.findIndex(item => item.product.id === productId && item.size === size);\n      if (cartItemIndex !== -1) { \n        state.items[cartItemIndex].quantity = quantity;\n        localStorage.setItem('cartItems', JSON.stringify(state.items));\n      }\n    },  \n    clearCart: (state, action) => {\n      state.items = [];\n      localStorage.removeItem('cartItems');\n    },\n    calculateSubtotal: (state, action) => {\n      const subtotal = state.items.reduce((acc, item) => acc + (item.price * item.quantity), 0);\n      \n      if (subtotal >= DELIVERY_THRESHOLD) {\n        state.delivery = 0;\n        state.subtotal = subtotal;\n      } else {\n        state.delivery = 60;\n        state.subtotal = subtotal;\n      }\n    },   \n    updateDelivery: (state, action) => {\n      state.delivery = action.payload.deliveryCost;\n    },\n    applyDiscount: (state, action) => {\n      state.discount = action.payload.discount;\n      console.log(\"discount sat:\",state.discount)\n    },\n    getTotal: (state) => {\n      state.total =  state.subtotal - (state.subtotal * state.discount) + state.delivery;\n    }\n  }\n});\n\nexport const { addToCart, removeFromCart, updateQuantity, clearCart, calculateSubtotal, updateDelivery, applyDiscount, getTotal } = cartSlice.actions;\n\nexport default cartSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}