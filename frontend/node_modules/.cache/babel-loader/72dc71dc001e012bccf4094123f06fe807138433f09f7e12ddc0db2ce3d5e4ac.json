{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { login } from \"../actions/userActions\";\nconst initialState = {\n  currentUser: JSON.parse(localStorage.getItem(\"currentUser\")) || null,\n  token: localStorage.getItem(\"token\") || \"\",\n  isLoading: false,\n  error: null\n};\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    logout: state => {\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"currentUser\");\n      state.currentUser = null;\n      state.token = \"\";\n    },\n    setUser: (state, action) => {\n      state.currentUser = action.payload;\n      localStorage.setItem(\"currentUser\", JSON.stringify(action.payload));\n    },\n    setLoading: (state, action) => {\n      state.isLoading = action.payload;\n    },\n    setError: (state, action) => {\n      state.error = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(login.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.error = null;\n      state.token = action.payload.token;\n      state.currentUser = action.payload.customer;\n      localStorage.setItem(\"currentUser\", JSON.stringify(action.payload.customer));\n      localStorage.setItem(\"token\", action.payload.token);\n    }).addCase(login.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.error.message;\n      state.token = \"\";\n      state.currentUser = null;\n    });\n  }\n});\nexport const {\n  logout,\n  setUser,\n  setLoading,\n  setError\n} = userSlice.actions;\nexport const selectToken = state => state.user.token;\nexport const selectCurrentUser = state => state.user.currentUser;\nexport const selectIsLoading = state => state.user.isLoading;\nexport const selectError = state => state.user.error;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","login","initialState","currentUser","JSON","parse","localStorage","getItem","token","isLoading","error","userSlice","name","reducers","logout","state","removeItem","setUser","action","payload","setItem","stringify","setLoading","setError","extraReducers","builder","addCase","pending","fulfilled","customer","rejected","message","actions","selectToken","user","selectCurrentUser","selectIsLoading","selectError","reducer"],"sources":["C:/Users/Surface/Documents/Pal/myproject/ecommerce-app-ms-sql-net-react-main/frontend/src/store/reducers/userSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport { login } from \"../actions/userActions\";\n\nconst initialState = {\n  currentUser: JSON.parse(localStorage.getItem(\"currentUser\")) || null,\n  token: localStorage.getItem(\"token\") || \"\",\n  isLoading: false,\n  error: null,\n};\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    logout: (state) => {\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"currentUser\");\n      state.currentUser = null;\n      state.token = \"\";\n    },\n    setUser: (state, action) => {\n      state.currentUser = action.payload;\n      localStorage.setItem(\"currentUser\", JSON.stringify(action.payload));\n    },\n    setLoading: (state, action) => {\n      state.isLoading = action.payload;\n    },\n    setError: (state, action) => {\n      state.error = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(login.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.error = null;\n        state.token = action.payload.token;\n        state.currentUser = action.payload.customer;\n\n        localStorage.setItem(\"currentUser\", JSON.stringify(action.payload.customer));\n        localStorage.setItem(\"token\", action.payload.token);\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.error.message;\n        state.token = \"\";\n        state.currentUser = null;\n      });\n  },\n});\n\nexport const { logout, setUser, setLoading, setError } = userSlice.actions;\n\nexport const selectToken = (state) => state.user.token;\nexport const selectCurrentUser = (state) => state.user.currentUser;\nexport const selectIsLoading = (state) => state.user.isLoading;\nexport const selectError = (state) => state.user.error;\n\nexport default userSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}